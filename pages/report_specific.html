<link href="css/invoice.css" rel="stylesheet">

<!-- widget grid -->
<section id="widget-grid" class="">

	<!-- row -->
	<div class="row">

		<!-- NEW WIDGET START -->
		<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

			<!-- Widget ID (each widget will need unique ID)-->
			<div class="jarviswidget well jarviswidget-color-darken" id="wid-id-0" data-widget-sortable="false" data-widget-deletebutton="false" data-widget-editbutton="false" data-widget-colorbutton="false">
				<!-- widget options:
				usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

				data-widget-colorbutton="false"
				data-widget-editbutton="false"
				data-widget-togglebutton="false"
				data-widget-deletebutton="false"
				data-widget-fullscreenbutton="false"
				data-widget-custombutton="false"
				data-widget-collapsed="true"
				data-widget-sortable="false"

				-->
				<header>
					<span class="widget-icon"> <i class="fa fa-barcode"></i> </span>
					<h2>Item #44761 </h2>

				</header>

				<!-- widget div-->
				<div>

					<!-- widget edit box -->
					<div class="jarviswidget-editbox">
						<!-- This area used as dropdown edit box -->

					</div>
					<!-- end widget edit box -->

					<!-- widget content -->
					<div class="widget-body no-padding">

						<div class="widget-body-toolbar">
							<div class="row">
								<div class="col-sm-6">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="btn-group">
                                                <a href="javascript:void(0);" class="btn btn-default">周</a>
                                                <a href="javascript:void(0);" class="btn btn-default">月</a>
                                                <a href="javascript:void(0);" class="btn btn-default">年</a>
                                            </div>
                                        </div>
                                        <div class="col-sm-8">
                                            <input class="form-control" type="text" placeholder="选择时间...">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
									<div class="input-group">
										<input class="form-control" type="text" placeholder="输入用户名称...">
										<div class="input-group-btn">
											<button class="btn btn-default" type="button">
												<i class="fa fa-search"></i> 统计
											</button>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="padding-10">
                            <div class="row">
                                <div class="col-sm-6" style="line-height:50px;">
                                    <div class="pull-left">
                                        <img width="150" height="32" alt="invoice icon" src="img/logo-blacknwhite.png">
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="pull-right">
                                        <h1 class="font-400">按用户统计</h1>
                                    </div>
                                </div>
                            </div>

                            <!--<br>-->
							<!--<div class="pull-left">-->

                                <!--<div class="btn-group">-->
                                    <!--<a href="javascript:void(0)" class="btn btn-sm btn-default "> <i class="fa fa-edit"></i> 导出为 PDF </a>-->
                                <!--</div>-->

                                <!--<div class="btn-group">-->
                                    <!--<a href="javascript:void(0)" class="btn btn-sm btn-default"> <i class="fa fa-plus"></i> 导出为 Excel </a>-->
                                <!--</div>-->

							<!--</div>-->
							<!--<div class="pull-right">-->
								<!--<h1 class="font-400">时间区间统计</h1>-->
							<!--</div>-->
							<!--<div class="clearfix"></div>-->
							<br>
							<br>
							<div class="row">
								<div class="col-sm-8">
                                    <address>
                                        <strong>用户信息.</strong>
                                        <br>
                                        Peter Li,
                                        <br>
                                        Administrator,PM
                                        <br>
                                        <abbr title="Phone">P:</abbr> (123) 456-7890
                                    </address>
								</div>
								<div class="col-sm-4">
									<!--<div>-->
										<!--<div>-->
											<!--<strong>INVOICE NO :</strong>-->
											<!--<span class="pull-right"> #AA-454-4113-00 </span>-->
										<!--</div>-->

									<!--</div>-->
									<div>
										<div class="font-md">
											<strong>时间区间 :</strong>
											<span class="pull-right"> <i class="fa fa-calendar"></i> 2014-02-15/2014-03-15  </span>
										</div>

									</div>
									<br>
									<div class="well well-sm  bg-color-blue txt-color-white no-border">
										<div class="fa-lg">
											缺陷总数 :
											<span class="pull-right"> 4,972 个 </span>
										</div>
									</div>
								</div>
							</div>
                            <hr>
                            <div class="row">
                                <div  class="col-sm-12">
                                    <div class="widget-body-toolbar bg-color-white " id="rev-toggles">

                                       <div class="smart-form pull-left">
                                           <div class="inline-group ">

                                                <label for="gra-0" class="checkbox">
                                                    <input type="checkbox" name="gra-0" id="gra-0" checked="checked">
                                                    <i></i> IMS系统开发
                                                </label>
                                                <label for="gra-1" class="checkbox">
                                                    <input type="checkbox" name="gra-1" id="gra-1" checked="checked">
                                                    <i></i> <span class="">DD卡片</span>
                                                </label>
                                                <label for="gra-2" class="checkbox">
                                                    <input type="checkbox" name="gra-2" id="gra-2" checked="checked">
                                                    <i></i> ADC卡片
                                                </label>
                                                <label for="gra-3" class="checkbox">
                                                    <input type="checkbox" name="gra-3" id="gra-3" checked="checked">
                                                    <i></i> 随便的卡片
                                                </label>
                                            </div>
                                       </div>
                                        <div class="btn-group hidden-phone pull-right">
                                            <a class="btn dropdown-toggle btn-xs btn-default" data-toggle="dropdown"><i
                                                    class="fa fa-cog"></i> 更多 <span class="caret"> </span> </a>
                                            <ul class="dropdown-menu pull-right">
                                                <li style="display: none;">
                                                    <a href="javascript:void(0);" id="change_to_bar"><i class="fa fa-random "></i> 切换为柱状图</a>
                                                </li>
                                                <li>
                                                    <a href="javascript:void(0);" id="change_to_pie"><i class="fa fa-random "></i> 切换为饼状图</a>
                                                </li>
                                                <li class="divider"></li>
                                                <li>
                                                    <a href="javascript:void(0);"><i class="fa fa-file-text"></i> 导出至PDF</a>
                                                </li>
                                                <li>
                                                    <a href="javascript:void(0);"><i class="fa fa-question "></i> 帮助</a>
                                                </li>
                                            </ul>
                                        </div>

                                    </div>

                                    <div class="padding-10">
                                        <div id="flotcontainer" class="chart-large has-legend-unique "></div>
                                        <div id="pie_chart" class="chart-large" style="display: none;"></div>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div  class="col-sm-12">
                                    <div class="widget-body-toolbar bg-color-white smart-form">
                                        <div class="btn-group hidden-phone pull-right">
                                            <a class="btn dropdown-toggle btn-xs btn-default" data-toggle="dropdown"><i
                                                    class="fa fa-cog"></i> 更多 <span class="caret"> </span> </a>
                                            <ul class="dropdown-menu pull-right">
                                                <li>
                                                    <a href="javascript:void(0);"><i class="fa fa-file-text-alt"></i> 导出至
                                                        PDF</a>
                                                </li>
                                                <li>
                                                    <a href="javascript:void(0);"><i class="fa fa-question-sign"></i> 帮助</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <table class="table table-hover">
                                        <thead>
                                        <tr>
                                            <th class="text-center" style="width:40px">No.</th>
                                            <th>项目/产品</th>
                                            <th>打开中</th>
                                            <th>已关闭</th>
                                            <th>总缺陷</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td class="text-center"><strong>2</strong></td>
                                            <td><a href="javascript:void(0);">IMS系统开发</a></td>
                                            <td>200</td>
                                            <td>1450</td>
                                            <td>1650</td>
                                        </tr>
                                        <tr>
                                            <td class="text-center"><strong>3</strong></td>
                                            <td><a href="javascript:void(0);"> DD卡片</a></td>
                                            <td>50</td>
                                            <td>300</td>
                                            <td>350</td>
                                        </tr>
                                        <tr>
                                            <td class="text-center"><strong>4</strong></td>
                                            <td><a href="javascript:void(0);">ADC卡片</a></td>
                                            <td>10</td>
                                            <td>20</td>
                                            <td>30</td>
                                        </tr>
                                        <tr>
                                            <td class="text-center"><strong>5</strong></td>
                                            <td><a href="javascript:void(0);">随便的卡片</a></td>
                                            <td>200</td>
                                            <td>1450</td>
                                            <td>1650</td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">总缺陷数量</td>
                                            <td><strong>3400</strong></td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">修复/总量</td>
                                            <td><strong>77%</strong></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

							<div class="invoice-footer">
								<div class="row">
									<div class="col-sm-7">
										<!--<div class="payment-methods">-->
											<!--<h5>Payment Methods</h5>-->
											<!--<img src="img/invoice/paypal.png" width="64" height="64" alt="paypal">-->
											<!--<img src="img/invoice/americanexpress.png" width="64" height="64" alt="american express">-->
											<!--<img src="img/invoice/mastercard.png" width="64" height="64" alt="mastercard">-->
											<!--<img src="img/invoice/visa.png" width="64" height="64" alt="visa">-->
										<!--</div>-->
									</div>
									<div class="col-sm-5">
										<div class="invoice-sum-total pull-right">
											<h3><strong>Total: <span class="text-success">4,972 个</span></strong></h3>
										</div>
									</div>

								</div>
								<!--<div class="row">-->
									<!--<div class="col-sm-12">-->
										<!--<p class="note">**To avoid any excess penalty charges, please make payments within 30 days of the due date. There will be a 2% interest charge per month on all late invoices.</p>-->
									<!--</div>-->
								<!--</div>-->

							</div>
						</div>

					</div>
					<!-- end widget content -->

				</div>
				<!-- end widget div -->

			</div>
			<!-- end widget -->

		</article>
		<!-- WIDGET END -->

	</div>

	<!-- end row -->

</section>
<!-- end widget grid -->

<script type="text/javascript">
	// DO NOT REMOVE : GLOBAL FUNCTIONS!
	pageSetUp();

    // Load FLOAT dependencies (related to page)
    loadScript("js/plugin/flot/jquery.flot.cust.js", loadFlotResize);


    function loadFlotResize() {
        loadScript("js/plugin/flot/jquery.flot.resize.js", loadFlotFillbetween);
    }

    function loadFlotFillbetween() {
        loadScript("js/plugin/flot/jquery.flot.fillbetween.js", loadFlotOrderBar);
    }

    function loadFlotOrderBar() {
        loadScript("js/plugin/flot/jquery.flot.orderBar.js", loadFlotPie);
    }

    function loadFlotPie() {
        loadScript("js/plugin/flot/jquery.flot.pie.js", loadFlotToolTip);
    }

    function loadFlotToolTip() {
        loadScript("js/plugin/flot/jquery.flot.tooltip.js", generatePageGraphs);
    }

    /* TAB 1: UPDATING CHART */
    // For the demo we use generated data, but normally it would be coming from the server

    function generatePageGraphs() {


	// PAGE RELATED SCRIPTS
    /* TAB 3: 分类信息  */
    $(function () {

        var d1 = [
                    [1354586000000, 153],
                    [1364587000000, 658],
                    [1374588000000, 198],
                    [1384589000000, 663],
                    [1394590000000, 801],
                    [1404591000000, 1080],
                    [1414592000000, 353],
                    [1424593000000, 749],
                    [1434594000000, 523],
                    [1444595000000, 258],
                    [1454596000000, 688],
                    [1464597000000, 364]
                ],
                d2 = [
                    [1354586000000, 53],
                    [1364587000000, 65],
                    [1374588000000, 98],
                    [1384589000000, 83],
                    [1394590000000, 980],
                    [1404591000000, 808],
                    [1414592000000, 720],
                    [1424593000000, 674],
                    [1434594000000, 23],
                    [1444595000000, 79],
                    [1454596000000, 88],
                    [1464597000000, 36]
                ],
                d3 = [
                    [1354586000000, 647],
                    [1364587000000, 435],
                    [1374588000000, 784],
                    [1384589000000, 346],
                    [1394590000000, 487],
                    [1404591000000, 463],
                    [1414592000000, 479],
                    [1424593000000, 236],
                    [1434594000000, 843],
                    [1444595000000, 657],
                    [1454596000000, 241],
                    [1464597000000, 341]
                ],
                d4 = [
                    [1354586000000, 547],
                    [1364587000000, 335],
                    [1374588000000, 684],
                    [1384589000000, 746],
                    [1394590000000, 287],
                    [1404591000000, 563],
                    [1414592000000, 979],
                    [1424593000000, 136],
                    [1434594000000, 743],
                    [1444595000000, 857],
                    [1454596000000, 441],
                    [1464597000000, 641]
                ],
                toggles = $("#rev-toggles"),
                target = $("#flotcontainer");
        var data = [
            {
                label: "IMS系统开发",
                data: d1,
                bars: {
                    show: true,
                    align: "center",
//                    horizontal : true,
//                    barWidth : 0.5,
                    barWidth: 15 * 30 * 60 * 1000 * 80,
                    order : 1
                }
            },
            {
                label: "随便的卡片",
                data: d4,
                color: '#6E587A',
//                lines: {
//                    show: true,
//                    lineWidth: 2
//                },
//                points: {
//                    show: true
//                }
                bars: {
                    show: true,
                    align: "center",
//                    horizontal : true,
//                    barWidth : 0.5,
                    barWidth: 15 * 30 * 60 * 1000 * 80,
                    order : 2
                }
            },
            {
                label: "DD卡片",
                data: d2,
                color: '#3276B1',
                lines: {
                    show: true,
                    lineWidth: 3
                },
                points: {
                    show: true
                }
            },
            {
                label: "ADC卡片",
                data: d3,
                color: '#71843F',
                lines: {
                    show: true,
                    lineWidth: 1
                },
                points: {
                    show: true
                }
            }
        ];

        var options = {
            grid: {
                show : true,
                borderWidth : 0,
                hoverable: true
            },
            legend : true,
            tooltip: true,
            tooltipOpts: {
                //content: '%x - %y',
                //dateFormat: '%b %y',
                defaultTheme: false
            },
            xaxis: {
                mode: "time"
            },
            yaxes: {
                tickFormatter: function (val, axis) {
                    return "$" + val;
                },
                max: 1200
            }
        };

        plot2 = null;

        function plotNow() {
            var d = [];
            toggles.find(':checkbox').each(function () {
                if ($(this).is(':checked')) {
                    d.push(data[$(this).attr("name").substr(4, 1)]);
                }
            });
            if (d.length > 0) {
                if (plot2) {
                    plot2.setData(d);
                    plot2.draw();
                } else {
                    plot2 = $.plot(target, d, options);
                }
            }

        };

        toggles.find(':checkbox').on('change', function () {
            plotNow();
        });
        plotNow();
    });

//        $('#myonoffswitch, #closeProjectForm').click(function (e) {
//            var $btn_add_project = $("#project_add_content");
//
//            $btn_add_project.slideToggle(function(){
//                console.log($btn_add_project.is(':visible'));
//                if($btn_add_project.is(':visible')){
//                    $('#myonoffswitch').attr('checked',true);
//                }else
//                {
//                    $('#myonoffswitch').attr('checked',false);
//                }
//            });
//        });

        $('#change_to_pie, #change_to_bar').click(function(){
            $(this).parent('li').toggle(function(){
                $('#change_to_bar').parent('li').toggle();
            });


            if($('#flotcontainer').is(':visible')){
                $('#flotcontainer').fadeToggle(250,function(){
                    $('#pie_chart').fadeToggle(250, function(){
                        if ($(this).is(':visible')) {
                            plotPieNow();
                        }
                    });
                });
            } else {
                $('#pie_chart').fadeToggle(250,function(){
                    $('#flotcontainer').fadeToggle(250);
                });
            }
            
        });

        /* pie chart */
        function plotPieNow() {
            var data_pie = [];
            var series = Math.floor(Math.random() * 10) + 1;
            for (var i = 0; i < series; i++) {
                data_pie[i] = {
                    label : "Series" + (i + 1),
                    data : Math.floor(Math.random() * 100) + 1
                }
            }
            $.plot($("#pie_chart"), data_pie, {
                series : {
                    pie : {
                        show : true,
//                        innerRadius : 0.5,
                        radius : 1,
                        label : {
                            show : true,
                            radius : 2 / 3,
                            formatter : function(label, series) {
                                return '<div style="font-size:11px;text-align:center;padding:4px;color:white;">' + label + '<br/>' + Math.round(series.percent) + '%</div>';
                            },
                            threshold : 0.1
                        }
                    }
                },
                legend : {
                    show : true,
                    noColumns : 1, // number of colums in legend table
                    labelFormatter : null, // fn: string -> string
                    labelBoxBorderColor : "#000", // border color for the little label boxes
                    container : null, // container (as jQuery object) to put legend in, null means default on top of graph
                    position : "ne", // position of default legend container within plot
                    margin : [5, 10], // distance from grid edge to default legend container within plot
                    backgroundColor : "#efefef", // null means auto-detect
                    backgroundOpacity : 1 // set to 0 to avoid background
                },
                grid : {
                    hoverable : true,
                    clickable : true
                }
            });
        }

        /* end pie chart */
    }
</script>
